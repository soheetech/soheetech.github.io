---
layout: post

category: JAVA
tag: Theory
title: "[KH/JAVA] 다형성(Polymorphism)"

date: 2023-03-09
last_modified_at: 2023-03-26
---

# 다형성(Polymorphism)
= 유사하지만 다양한 형상이나 기능을 갖는다(객체 지향 언어의 특징)

```java
부모클래스 변수명 = new 자식클래스()
```

- 하나의 행동으로 여러 가지 일을 수행하는 개념
- 상속을 이용해 부모 클래스 타입 참조변수 하나로 상속 관계에 있는 여러 타입의 자식 객체를 참조할 수 있는 기술
  + 한 부모에서 나온 두 자식 객체는 비슷하지만 다름
  + 하나의 클래스에서 오버로딩된 메소드들은 유사하지만 조금씩 다른 기능을 수행함
  + 자식 클래스에서 재정의된 메소드는 부모의 것과 유사하지만 다른 기능을 수행함


## 다형성과 형 변환
- 상속 관계에 있는 클래스 간에는 타입 변환이 가능함
  + 전혀 다른 두 클래스 간에는 안 됨
- 하위 클래스에서 상위 클래스로의 형 변환(=업 캐스팅)은 자동 형 변환 가능
  + 참조형 변수는 같은 유형의 객체 또는 하위 객체를 참조할 수 있음


### 클래스의 형 변환

#### 업 캐스팅(Up Casting)
- 상속 관계에 있는 부모, 자식 클래스 간에 부모타입의 참조형 변수가 모든 자식 타입 객체의 주소를 참조할 수 있음
- 자식 객체의 주소를 전달받은 부모 타입의 참조 변수를 통해서 접근할 수 있는 객체의 정보는 부모로부터 상속받은 멤버만 참조 가능


#### 다운 캐스팅(Down Casting)
= 참조변수의 강제 형변환

- 자식 객체의 주소를 받은 부모 참조형 변수를 가지고 자식의 멤버를 참조해야 할 경우 부모 클래스 타입의 참조형 변수를 자식 클래스 타입으로 형변환하는 것
- 자동으로 처리되지 않기 때문에 반드시 자식 타입을 명시하여 형변환
- 클래스 간의 형 변환은 반드시 상속 관계인 클래스끼리만 가능

```java
// Sonata 클래스가 Car 클래스의 후손일 때

Car c = new Sonata();
// → Sonata 클래스형에서 Car 클래스형으로 바뀜
// → 업 캐스팅

((Sonata)c).moveSonata();
// → Car 클래스형에서 Sonata 클래스형으로 바뀜
// → 다운 캐스팅
```

## 다형성과 오버라이딩
### 클래스의 다형성
- 부모 클래스로부터 상속받은 메소드를 자식 클래스에서 오버라이딩할 수 있음
- 부모와 자식에서 같은 이름의 메소드가 다른 기능을 수행
  + 같은 이름과 매개 변수 및 반환형을 가지나 몸체가 다름

### 인터페이스의 다형성
- 자식 클래스들에서 상위 인터페이스의 메소드를 다르게 구현함

## 객체 배열과 다형성
다형성을 이용하여 상속 관계에 있는 하나의 부모 클래스 타입의 배열 공간에 여러 종류의 자식 클래스 객체 저장 가능

```java
Car[] carArr = new Car[5];

carArr[0] = new Sonata();
carArr[1] = new Avante();
carArr[2] = new Grandure();
carArr[3] = new Spark();
carArr[4] = new Morning();
```

## 매개변수와 다형성
다형성을 이용하여 메소드 호출 시 부모 타입의 변수 하나만 사용해 자식 타입의 객체를 받을 수 있음

```java
public void execute() {
	driveCar(new Sonata());
	driveCar(new Avante());
	driveCar(new Grandure());
}

public void driveCar(Car c) {}
```
